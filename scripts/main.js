const categories = {
    "–í–∏–Ω–æ": {
        "Zenato Pinot Grigio": "GWS",
        "Zenato Bardolino": "GWS",
        "Zenato Chiaretto": "GWS",
        "Haulashore Sauvignon Blanc": "GWS",
        "770 mile Zinfandel": "GWS",
        "Speri Valpolicella": "–ö—Ä–∞—Ñ—Ç 2",
        "1924 Chardonnay": "GWS",
        "Ak Arba Kazakh Riesling": "Arba Wine",
        "Ak Arba Riesling 0.3": "Arba Wine",
        "Ak Arba Riesling Reserve": "Arba Wine",
        "Allimant-Laugner Gew√ºrztraminer": "GWS",
        "Attems Pinot Grigio": "KWS",
        "Banfi Principessa Gavia Gavi": "North Trade",
        "BARISTA PINOTAGE": "GWS",
        "Belvento Vermentino": "KWS",
        "Black Stallion Cabernet Sauvignon": "GWS",
        "Black Stallion Chardonnay": "GWS",
        "Blason d'Issan, Margaux AOC": "GWS",
        "Chablis Domaine Long-Depaquit": "North Trade",
        "Chablis Premier Cru 'Fourchaume'": "North Trade",
        "Chablis 1er Cru Montmains": "GWS",
        "Chateau Giscours Margaux AOC": "GWS",
        "Chateau Lanessan Haut-Medoc AO–°": "GWS",
        "Chateau Troupian Haut - Medoc": "GWS",
        "CORRALILLO WINEMAKERS BLEND": "GWS",
        "Cote-Rotie 'Brune et Blonde'": "KWS",
        "Coto de Imaz Rioja": "GWS",
        "Cune Rioja Gran Reserva": "GWS",
        "EQ CHARDONNAY": "GWS",
        "EQ PINOT NOIR": "GWS",
        "EQ SAUVIGNON BLANC": "GWS",
        "Errazuriz Chardonnay": "KWS",
        "Errazuriz Sauvignon Blanc": "KWS",
        "Fritz Walter Riesling": "GWS",
        "Fritz Walter Spatburgunder (Pinot Noir)": "GWS",
        "Furlet Bianco": "GWS",
        "Furlet Pinot Nero": "GWS",
        "Gaja 'Gaia & Rey' Langhe": "KWS",
        "Gaja 'Rossj - Bass' Langhe": "KWS",
        "Gotas de Mar Albarino": "–ö—Ä–∞—Ñ—Ç 2",
        "Gotas de Mar Godello": "–ö—Ä–∞—Ñ—Ç 2",
        "Kyzyl Arba Cabernet Franc": "Arba Wine",
        "Kyzyl Arba Cabernet Franc 0.3": "Arba Wine",
        "La Scolca Gavi dei Gavi": "–ö—Ä–∞—Ñ—Ç 2",
        "Lagyl Arba Saperavi Reserve": "Arba Wine",
        "Laporte Sancerre Le Rochoy": "GWS",
        "Le Merle Blanc de Chateau Clarke": "GWS",
        "Le Volte dell‚ÄôOrnellaia": "KWS",
        "Livio Felluga Pinot Grigio": "–ö—Ä–∞—Ñ—Ç 2",
        "LVNAE Vermentino 'Etichetta Grigia'": "North Trade",
        "Marlborough Sun Pinot Noir": "–ö—Ä–∞—Ñ—Ç 2",
        "Marlborough Sun Rose": "–ö—Ä–∞—Ñ—Ç 2",
        "Marlborough Sun Sauvignon": "–ö—Ä–∞—Ñ—Ç 2",
        "Mauro Molino Barolo": "GWS",
        "Meursault ": "North Trade",
        "Muller Reisling G√∂ttweiger Berg": "GWS",
        "Muller Zweigelt G√∂ttweiger Berg": "GWS",
        "Natureo Muscat 0%": "KWS",
        "Natureo Syrah 0%": "KWS",
        "Nuala Pinot Noir": "KWS",
        "Nuala Sauvignon Blanc": "KWS",
        "Old Coach Road Pinot Noir": "GWS",
        "Pino Arba Pinot Noir 0.3": "Arba Wine",
        "Pino Arba Pinot Noir Reserve": "Arba Wine",
        "Pino Sape": "Arba Wine",
        "REYNEKE ORGANIC CHENIN BLANC": "GWS",
        "REYNEKE ORGANIC SYRAH": "GWS",
        "Sassicaia Bolgheri DOC": "–ö—Ä–∞—Ñ—Ç 2",
        "Talo Primitivo-Merlot": "KWS",
        "Terre NatuzziI Chianti": "GWS",
        "THE CHOCOLATE BLOCK": "GWS",
        "Tommasi Le Rosse Pinot Grigio": "North Trade",
        "Valduero Blanco": "GWS",
        "Valduero Una Cepa 2016": "GWS",
        "Zenato AMARONE DELLA VALPOLICELLA CLASSICO": "GWS",
        "Zenato LUGANA DOC San Benedetto": "GWS",
        "Zenato SERGIO LUGANA DOC RISERVA": "GWS",
        "Zenato VALPOLICELLA RIPASSO DOC SUPERIORE": "GWS"
    },
    "–í–∏—Å–∫–∏": {
        "The Macallan 12 —É.–æ": "GWS",
        "The Macallan Double Cask 15 YO": "GWS",
        "The Macallan Double Cask 18 YO": "GWS",
        "The Macallan Sherry Oak 18": "GWS",
        "Glenlivet Founders": "Astalco",
        "Glenmorangie 10 y.o": "KWS",
        "Glenmorangie Nectar D'OR": "KWS",
        "Dalmore 12 y.o": "North Trade",
        "Chivas regal 12 y.o": "",
        "Jameson Crested": "Astalco",
        "Jameson Black Barrel": "Astalco"
    },
    "–í–æ–¥–∫–∞": {
        "–í–æ–¥–∫–∞ –ö—ã–∑–ª–∂–∞—Ä –ì–æ–ª–¥ 0.5": "–°–∞—Ç—É—Ä–Ω–î–∏—Å—Ç—Ä–∏–±",
        "–í–æ–¥–∫–∞ –ö–∞–∑–∞–∫ –µ–ª–∏ 0.7": "–°–∞—Ç—É—Ä–Ω–î–∏—Å—Ç—Ä–∏–±",
        "–í–æ–¥–∫–∞ –°–∞–±–æ–ª–∏–Ω–∞ 0.5": "–ö—Ä–∞—Ñ—Ç 2",
        "–í–æ–¥–∫–∞ –¶–∞—Ä—Å–∫–∞—è Golden Snow 0.7": "–ö—Ä–∞—Ñ—Ç 2",
        "Grey Goose 0.7": "–†–µ—Å–ø–µ–∫—Ç"
    },
    "–î–∂–∏–Ω": {
        "Tanqueray 1–ª": "North Trade",
        "Roku Gin": "North Trade",
        "Bombay Sapphire ": "",
        "Bulldog dry Gin ": "",
        "The Botanist": "North Trade"
    },
    "–ò–≥—Ä–∏—Å—Ç–æ–µ": {
        "Allimant-Laugner Cr√©mant": "GWS",
        "GOSSET Blanc de Blanc": "GWS",
        "GOSSET Brut": "GWS",
        "Laurent Perrier Blanc de Blanc": "North Trade",
        "Laurent Perrier Rose": "North Trade",
        "Marlborough Sun Bubbles": "–ö—Ä–∞—Ñ—Ç 2",
        "Mo—ët Chandon Brut 0.2": "KWS",
        "Mo—ët Chandon Brut 0.75": "KWS",
        "Montelvini Asolo": "GWS",
        "Montelvini Extra Dry": "GWS",
        "Ruinart Blanc de Blancs": "KWS",
        "Valdo Valdobbiadene": "GWS"
    },
    "–ö–æ–Ω—å—è–∫": {
        "Hennessy VS 0.5": "KWS",
        "Hennessy VSOP 0.7": "KWS",
        "Hennessy XO 0.7": "KWS",
        "Martell XO 0.7 ": "",
        "Deau Cognac VS 0.7": ""
    },
    "–ü–∏–≤–æ": {
        "Bitburger 0%": "–ö—Ä–∞—Ñ—Ç 2",
        "Warsteiner": "–ö—Ä–∞—Ñ—Ç 2",
        "Blanche de Bruxelles": "–ö—Ä–∞—Ñ—Ç 2"
    },
    "–ü–æ—Ä—Ç–≤–µ–π–Ω": {
        "Taylor‚Äôs Vintage Port": "GWS",
        "Taylor‚Äôs Tawny 20": "GWS",
        "Gonzalez Byass Nectar": "Monte Bianco",
        "Gonzalez Byass Alfonso": "Monte Bianco",
        "Gonzalez Byass Leonor": "Monte Bianco",
        "Gonzalez Byass Noe": "Monte Bianco"
    },
    "–ü—Ä–æ—á–µ–µ": {
        "–ú–∞–ª–∏–Ω–∞ —Å–∏—Ä–æ–ø": "North Trade",
        "–ú–∞–Ω–≥–æ —Å–∏—Ä–æ–ø": "North Trade",
        "–ú–∞—Ä–∞–∫—É–π—è —Å–∏—Ä–æ–ø": "North Trade",
        "–ö–∏–≤–∏ —Å–∏—Ä–æ–ø": "North Trade",
        "–†–æ–∑–∞ —Å–∏—Ä–æ–ø": "North Trade",
        "–ö–æ—Ñ–µ": "–î–∞–Ω–∏—è—Ä –ö–æ—Ñ–µ"
    },
    "–†–æ–º": {
        "Brugal 1888": "GWS",
        "Bacardi reserva 8 y.o": "–†–µ—Å–ø–µ–∫—Ç",
        "Zacapa 23 y.o": "North Trade",
        "Zacapa XO": "North Trade"
    },
    "–°–∞—à–∞ –ó–∞–∫—É–ø": {
        "–ü—é—Ä–µ –º–∞–ª–∏–Ω–∞": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ü—é—Ä–µ –∫–∏–≤–∏": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ü—é—Ä–µ –º–∞—Ä–∞–∫—É–π—è": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ü—é—Ä–µ –º–∞–Ω–≥–æ": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ê—Å—Å–∞–º —á–∞–π": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ú–æ–ª–æ–∫–æ 3,2%": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ö–æ–∫–æ—Å –º–æ–ª–æ–∫–æ": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ú–∏–Ω–¥–∞–ª—å –º–æ–ª–æ–∫–æ": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ú—ë–¥": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–°–∞—Ö–∞—Ä –ø–µ—Å–æ–∫": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–°–∞—Ö–∞—Ä —Ä–∞—Ñ–∏–Ω–∞–¥": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–¢—Ä–æ—Å—Ç–Ω–∏–∫ —Ä–∞—Ñ–∏–Ω–∞–¥": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–ö–ª—é–∫–≤–∞ —Å/–º": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–í–∏—à–Ω—è —Å/–º": "–°–∞—à–∞ –ó–∞–∫—É–ø",
        "–û–±–ª–µ–ø–∏—Ö–∞ —Å/–º": "–°–∞—à–∞ –ó–∞–∫—É–ø"
    },
    "–°–æ—Ñ—Ç—ã": {
        "–°–∞–Ω –±–µ–Ω–µ–¥–µ—Ç–Ω–æ –≥–∞–∑": "–ö—Ä–∞—Ñ—Ç 2",
        "–°–∞–Ω –±–µ–Ω–µ–¥–µ—Ç–Ω–æ –±/–≥": "–ö—Ä–∞—Ñ—Ç 2",
        "–¢—É—Ä–∞–Ω —Å—Ç–µ–∫–ª–æ –≥–∞–∑": "–°–∞—Ç—É—Ä–Ω–î–∏—Å—Ç—Ä–∏–±",
        "–¢—É—Ä–∞–Ω —Å—Ç–µ–∫–ª–æ –±/–≥": "–°–∞—Ç—É—Ä–Ω–î–∏—Å—Ç—Ä–∏–±",
        "–¢—É—Ä–∞–Ω –≥–∞–∑ 1–ª": "–°–∞—Ç—É—Ä–Ω–î–∏—Å—Ç—Ä–∏–±",
        "–ö–æ–ª–∞ —Å—Ç–µ–∫–ª–æ": "–†–µ–¥ –º–∞—à–∏–Ω",
        "–ö–æ–ª–∞ –∑–µ—Ä–æ —Å—Ç–µ–∫–ª–æ": "–†–µ–¥ –º–∞—à–∏–Ω",
        "–§–∞–Ω—Ç–∞ —Å—Ç–µ–∫–ª–æ": "–†–µ–¥ –º–∞—à–∏–Ω",
        "–°–ø—Ä–∞–π—Ç —Å—Ç–µ–∫–ª–æ": "–†–µ–¥ –º–∞—à–∏–Ω",
        "Swell —è–±–ª–æ–∫–æ": "–ö—Ä–∞—Ñ—Ç 2",
        "Swell –∞–ø–µ–ª—å—Å–∏–Ω": "–ö—Ä–∞—Ñ—Ç 2",
        "Swell —Ç–æ–º–∞—Ç": "–ö—Ä–∞—Ñ—Ç 2",
        "Swell –≤–∏—à–Ω—è": "–ö—Ä–∞—Ñ—Ç 2"
    },
    "–¢–µ–∫–∏–ª–∞": {
        "Patton Silver": "–†–µ—Å–ø–µ–∫—Ç",
        "Patron Reposado": "–†–µ—Å–ø–µ–∫—Ç",
        "Patron Anejo": "–†–µ—Å–ø–µ–∫—Ç",
        "Don Julio Blanco": "North Trade",
        "Don Julio 1942": "North Trade"
    },
   
};

    const supplierPhones = {
    "GWS": "+77014304714",
    "Astalco": "+77759160529",
    "–°–∞—Ç—É—Ä–Ω–î–∏—Å—Ç—Ä–∏–±": "+77015938616",
    "–ö—Ä–∞—Ñ—Ç 2": "+77014988085",
    "–†–µ–¥ –º–∞—à–∏–Ω": "+77014291311",
    "KWS": "+77780512704",
    "–†–µ—Å–ø–µ–∫—Ç": "+77072535639",
    "Monte Bianco": "+77076020224",
    "North Trade": "+77717569321",
    "–°–∞—à–∞ –ó–∞–∫—É–ø": "+77017743245",
    "–î–∞–Ω–∏—è—Ä –ö–æ—Ñ–µ": "+77016619699"
};

const selectedItems = {};

function showCategory(category) {
const content = document.getElementById('content');
content.innerHTML = `<h2>${category}</h2>`;

  const items = Object.keys(categories[category]).sort((a, b) => 
        a.localeCompare(b, 'ru', {sensitivity: 'base'})
    );

Object.keys(categories[category]).forEach(item => {
    content.innerHTML += `
        <div class="item">
            <div class="item-details">
                <span class="item-name">${item}</span>
            </div>
            <div class="item-controls">
                <button onclick="changeQty('${item}', -1)">-</button>
                <span id="${item}-qty">${selectedItems[item] || 0}</span>
                <button onclick="changeQty('${item}', 1)">+</button>
            </div>
        </div>
    `;
});
content.innerHTML += `
    <div class="summary">
        <button onclick="showSummary()">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–¥–∫—É</button>
    </div>
`;
}

function changeQty(item, delta) {
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É —Ç–æ–≤–∞—Ä–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫
const supplier = Object.entries(categories).find(([_, items]) => items[item])?.[1][item];
if (!supplier) {
    alert(`–£ —Ç–æ–≤–∞—Ä–∞ "${item}" –Ω–µ —É–∫–∞–∑–∞–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫.`);
    return;
}

// –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä ‚Äî "–°–∞—Ö–∞—Ä –ø–µ—Å–æ–∫", –∏–∑–º–µ–Ω—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ 5
const step = item === "–°–∞—Ö–∞—Ä –ø–µ—Å–æ–∫" ? 5 : 1;

// –ò–∑–º–µ–Ω—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
selectedItems[item] = (selectedItems[item] || 0) + delta * step;
if (selectedItems[item] < 0) selectedItems[item] = 0;

// –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
document.getElementById(`${item}-qty`).innerText = selectedItems[item];

// –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–±—Ä–æ—Å–∏—Ç—å"
updateResetButton();
}

function showSummary() {
const content = document.getElementById('content');
content.innerHTML = `<h2>–°–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞</h2>`;
const groupedBySupplier = {};

// –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
for (const [item, qty] of Object.entries(selectedItems)) {
    if (qty > 0) {
        const supplier = Object.entries(categories).find(([_, items]) => items[item])?.[1][item];
        if (supplier) {
            if (!groupedBySupplier[supplier]) groupedBySupplier[supplier] = [];
            groupedBySupplier[supplier].push({ item, qty });
        }
    }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞, –µ—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
if (Object.keys(groupedBySupplier).length === 0) {
    content.innerHTML += `<p>–í—ã –Ω–µ –≤—ã–±—Ä–∞–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.</p>`;
    return;
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
for (const [supplier, items] of Object.entries(groupedBySupplier)) {
    content.innerHTML += `<h3>${supplier}</h3><ul>`;
    items.forEach(({ item, qty }) => {
        content.innerHTML += `<li class="summary-item">${item}: ${qty}</li>`;
    });
    content.innerHTML += `</ul><button class="send-order-button" onclick="sendOrder('${supplier}')">üì¶ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É ${supplier}</button>`;
}
}

function sendOrder(supplier) {
const items = Object.entries(selectedItems)
    .filter(([item, qty]) => qty > 0 && Object.values(categories).find(cat => cat[item])[item] === supplier)
    .map(([item, qty]) => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å "–∫–≥" –∏–ª–∏ "–∫–µ–π—Å" –∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É
        const itemsWithKg = ["–ö–ª—é–∫–≤–∞ —Å/–º", "–í–∏—à–Ω—è —Å/–º", "–û–±–ª–µ–ø–∏—Ö–∞ —Å/–º", "–°–∞—Ö–∞—Ä –ø–µ—Å–æ–∫"];
        const isSoft = categories["–°–æ—Ñ—Ç—ã"] && categories["–°–æ—Ñ—Ç—ã"][item];
        const quantityText = itemsWithKg.includes(item)
            ? `${qty}–∫–≥` // –î–æ–±–∞–≤–ª—è–µ–º "–∫–≥" –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
            : isSoft
            ? `${qty}–∫–µ–π—Å` // –î–æ–±–∞–≤–ª—è–µ–º "–∫–µ–π—Å" –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–°–æ—Ñ—Ç—ã"
            : `${qty}`; // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
        return `${item}: ${quantityText}`;
    })
    .join("\n");

if (!items) {
    alert("–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç—Ç–æ–º—É –ø–æ—Å—Ç–∞–≤—â–∏–∫—É.");
    return;
}

const message = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –∑–∞—è–≤–∫–∞:\n\n${items}`;
const phone = supplierPhones[supplier];

const encodedMessage = encodeURIComponent(message);
const whatsappUrl = `https://wa.me/${phone}?text=${encodedMessage}`;
console.log(`WhatsApp URL: ${whatsappUrl}`); // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
window.open(whatsappUrl, '_blank');
}

function resetSelection() {
// –û—á–∏—Å—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
for (const item in selectedItems) {
    selectedItems[item] = 0;
}

// –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
const content = document.getElementById('content');
content.innerHTML = `
    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h2>
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑.</p>
`;

// –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–±—Ä–æ—Å–∏—Ç—å"
updateResetButton();
}

function searchItems() {
const query = document.getElementById('search-input').value.toLowerCase();
const clearButton = document.getElementById('clear-search');
const content = document.getElementById('content');

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–ª–∏ —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—á–∏—Å—Ç–∫–∏
if (query) {
    clearButton.style.display = 'block';
} else {
    clearButton.style.display = 'none';
}

content.innerHTML = '';

let foundItems = false;

Object.keys(categories).forEach(category => {
    const filteredItems = Object.keys(categories[category]).filter(item =>
        item.toLowerCase().includes(query)
    );

    if (filteredItems.length > 0) {
        foundItems = true;
        content.innerHTML += `<h2>${category}</h2>`;
        filteredItems.forEach(item => {
            content.innerHTML += `
                <div class="item">
                    <div class="item-details">
                        <span class="item-name">${item}</span>
                    </div>
                    <div class="item-controls">
                        <button onclick="changeQty('${item}', -1)">-</button>
                        <span id="${item}-qty">${selectedItems[item] || 0}</span>
                        <button onclick="changeQty('${item}', 1)">+</button>
                    </div>
                </div>
            `;
        });
    }
});

if (!foundItems) {
    content.innerHTML = '<p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>';
} else {
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–¥–∫—É", –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã —Ç–æ–≤–∞—Ä—ã
    content.innerHTML += `
        <div class="summary">
            <button onclick="showSummary()">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–¥–∫—É</button>
        </div>
    `;
}
}

function updateResetButton() {
const menu = document.getElementById('menu');
const hasSelectedItems = Object.values(selectedItems).some(qty => qty > 0);

// –£–¥–∞–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–°–±—Ä–æ—Å–∏—Ç—å", –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ –µ—Å—Ç—å
const existingResetButton = document.getElementById('reset-button');
if (existingResetButton) {
    existingResetButton.remove();
}

// –ï—Å–ª–∏ –µ—Å—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –¥–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–°–±—Ä–æ—Å–∏—Ç—å"
if (hasSelectedItems) {
    const resetButton = document.createElement('button');
    resetButton.id = 'reset-button';
    resetButton.className = 'category-button reset';
    resetButton.textContent = '–°–±—Ä–æ—Å–∏—Ç—å';
    resetButton.onclick = resetSelection;
    menu.appendChild(resetButton);
}
}

function clearSearch() {
const searchInput = document.getElementById('search-input');
const clearButton = document.getElementById('clear-search');

searchInput.value = ''; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
clearButton.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—á–∏—Å—Ç–∫–∏
searchItems(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
updateResetButton(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–±—Ä–æ—Å–∏—Ç—å"
}

function updateMenu() {
    const menu = document.getElementById('menu');
    menu.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–µ–µ –º–µ–Ω—é

    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –∏—Ö –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
    const sortedCategories = Object.keys(categories).sort((a, b) => 
        a.localeCompare(b, 'ru', {sensitivity: 'base'})
    );

    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    sortedCategories.forEach(category => {
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        if (Object.keys(categories[category]).length === 0) return;

        const button = document.createElement('button');
        button.className = 'category-button';
        button.onclick = () => showCategory(category);

        // –î–æ–±–∞–≤–ª—è–µ–º —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        let emoji = '';
        switch(category) {
           
        }

        button.textContent = `${category} ${emoji}`.trim();
        menu.appendChild(button);
    });

    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞
    updateResetButton();
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
    updateMenu();
});

